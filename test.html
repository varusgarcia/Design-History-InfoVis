<html>
<head>
  <meta charset="utf-8">
  <title>Design Geschichte InfoVis</title>
  <script src="http://d3js.org/d3.v3.min.js"></script
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

  <style>
  body, div {
    margin: 0;
    padding: 0;
  }

  svg {
  }

  .axis text {
    font-family: Oxygen;
    font-size: 10px;
  }
  .axis line,
  .axis path {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
  }

  .node {
    stroke-width: 1.5px;
  }
  .node.target {
    fill: #FFBC73;
    stroke: #FFA340;
  }
  .node.source {
    fill: #62B1D0;
    stroke: #0776A0;
  }

  .link {
    stroke: #999;
    stroke-opacity: .6;
  }
  </style>
</head>

<body>
<script src="test-db/data.js"></script>
<script>

d3.json("http://designgeschichte.fh-potsdam.de/nodes", function (data){

var browserHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
var browserWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);

var force = d3.layout.force()
          .charge(-300)
          .linkDistance(100)
          .size([browserHeight, browserWidth]);

var zoom = d3.behavior.zoom()
          .scaleExtent([0.1, 10])
          .on("zoom", zoomed);

var svg = d3.select("body").append("svg")
          .attr("width", browserWidth)
          .attr("height", browserHeight)
          .append("g")
          .call(zoom);

  var container = svg.append("g");

  force.nodes(data.nodes)
          //.links(data.edges)
          .start();

  var node = container.append("g")
                        .attr("class", "nodes")
                        .selectAll(".node")
  .data(data.nodes)
  .enter().append("g")
  .attr("class", "node")
                    .attr("cx", function(d) { return d.x; })
                    .attr("cy", function(d) { return d.y; })
                    //.call(drag);

  var link = container.append("g")
                      .attr("class", "links")
                      .selectAll(".link")

  node.append("circle")
    .attr("r", function(d) { return d.weight * 2+ 12; })
    //.style("fill", function(d) { return color(1/d.rating); });

  force.on("tick", function() {

  data.nodes.forEach (function(nodePos,i) {
    nodePos.x = i * 15;
  })

      node.attr("transform", function(d,i) { return "translate(" + d.x + "," + d.y + ")"; });
  });

function zoomed() {
    container.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
  }

});
</script>
</body>
</html>
